<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2025 å»£å³¶ãƒ»å²¡å±±ãƒ»å§¬è·¯ãƒ»å¤§é˜ª 9 å¤©è¡Œç¨‹ï¼ˆå«ç¾é£Ÿï¼‹åœ°åœ–ï¼‹JMAå¤©æ°£ï¼‰</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background:#f3f4f6; }
    .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; }
    .accordion-toggle:checked + label + .accordion-content { max-height: 4000px; }
    .rotate-icon { transform: rotate(180deg); }
    .day-card { box-shadow: 0 10px 25px rgba(15,23,42,0.12); transition: transform .2s ease, box-shadow .2s ease; }
    .day-card:hover { transform: translateY(-2px); box-shadow: 0 18px 35px rgba(15,23,42,0.18); }
    .food-booked { background:#ecfdf5; border-left:4px solid #10b981; color:#065f46; padding:.45rem .7rem; border-radius:.375rem; font-size:.8rem; margin-top:.35rem; }
    .food-planned { background:#eff6ff; border-left:4px solid #2563eb; color:#1e3a8a; padding:.45rem .7rem; border-radius:.375rem; font-size:.8rem; margin-top:.35rem; }
  </style>
<!-- PWA meta injected -->
<meta name="theme-color" content="#020617" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="Japan Trip Gemini" />
<link rel="manifest" href="gemini_manifest.webmanifest" />
<link rel="apple-touch-icon" href="gemini_icon-192.png" />

</head>
<body class="p-4 md:p-8">
  <div class="max-w-5xl mx-auto">
    <header class="mb-6 border-b border-emerald-400 pb-4 flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
      <div>
        <h1 class="text-3xl md:text-4xl font-bold text-slate-900 tracking-tight">
          ğŸ‡¯ğŸ‡µ 2025 å»£å³¶ãƒ»å²¡å±±ãƒ»å§¬è·¯ãƒ»å¤§é˜ª 9 å¤©è¡Œç¨‹ï¼ˆå„ªåŒ–ï¼‹åœ°åœ–ï¼‹å¤©æ°£ç‰ˆï¼‰
        </h1>
        <p class="text-sm md:text-base text-slate-600 mt-1">
          æ—…éŠæ—¥æœŸï¼š2025/12/02ï¼ˆäºŒï¼‰ï½ 12/10ï¼ˆä¸‰ï¼‰ï½œ12/04ï½12/08 ç‚º JR è¥¿æ—¥æœ¬å±±é™½æ–°å¹¹ç·š Pass ä½¿ç”¨æ—¥
        </p>
      </div>
      <div class="text-xs md:text-sm text-slate-500 bg-white/70 border border-slate-200 rounded-lg px-3 py-2 max-w-xs">
        ğŸ“Œ æ“ä½œæç¤ºï¼š<br/>
        â€£ é»æ¯æ—¥å¡ç‰‡æ¨™é¡Œå±•é–‹/æ”¶åˆè¡Œç¨‹ã€‚<br/>
        â€£ **å¤©æ°£å€å¡Šå·²æ›´æ–°ç‚ºæœ€æ–°æ»¾å‹•é å ±ã€‚**
      </div>
    </header>

    <main id="itinerary-container" class="space-y-6"></main>
  </div>

  <script>
    const itinerary = [
      {
        id: 1,
        dateLabel: "12/02 (äºŒ)",
        title: "Day 1ï¼šå°ç£ç§»å‹•æ—¥",
        city: "å°å— â†’ æ–°ç«¹ â†’ æ¡ƒåœ’æ©Ÿå ´",
        theme: "æ”¶å°¾å·¥ä½œï¼‹å‰å¾€æ¡ƒåœ’æ©Ÿå ´",
        hotel: "N/Aï¼ˆæ©Ÿå ´å‰ä¸€æ™šï¼‰",
        jrPass: false,
        mapQuery: "Taiwan Taoyuan International Airport TPE",
        hotelMapQuery: null, 
        weather: {
          label: "å°ç£åŒ—éƒ¨èˆ‡å»£å³¶ (HIJ) é™„è¿‘",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=340010&lang=en",
          status: "å¤§å¤šæ™´æœ—",
          temp: "ç´„ 18Â°C / 8Â°C (å»£å³¶)",
          tip: "å»£å³¶æ°£æº«èˆ’é©ï¼Œå°ç£å‡ºç™¼è«‹ç•™æ„ä¿æš–ã€‚"
        },
        activities: [
          {
            time: "14:48",
            label: "å°å—é«˜éµ â†’ æ–°ç«¹é«˜éµï¼ˆå°ç£é«˜éµ 14:48-15:56ï¼‰",
            icon: "ğŸš„",
            mapQuery: "Tainan HSR Station",
          },
          {
            time: "16:17",
            label: "æ–°ç«¹é«˜éµ â†’ ä½å®¶ï¼ˆå¿«æ· 8 è™Ÿå…¬è»Šï¼‰",
            icon: "ğŸšŒ",
            mapQuery: "Hsinchu HSR Station",
          },
          {
            time: "æ·±å¤œ 03:30",
            label: "æ–°ç«¹ â†’ æ¡ƒåœ’æ©Ÿå ´ (TPE) æ©Ÿå ´æ¥é€",
            icon: "ğŸš",
            mapQuery: "Taiwan Taoyuan International Airport T1",
          }
        ]
      },
      {
        id: 2,
        dateLabel: "12/03 (ä¸‰)",
        title: "Day 2ï¼šå»£å³¶å¸‚å€ï¼†å’Œç‰›ç‡’è‚‰",
        city: "å»£å³¶",
        theme: "æŠµé”å»£å³¶ãƒ»åŸçˆ†åœ“é ‚ï¼‹å’Œç‰›ç‡’è‚‰",
        hotel: "å»£å³¶éº—å˜‰çš‡å®¶é£¯åº—ï¼ˆå·²è¨‚ï¼‰",
        jrPass: false,
        mapQuery: "Hiroshima Peace Memorial Park",
        hotelMapQuery: "Rihga Royal Hotel Hiroshima, 6-78 Motomachi, Naka-ku, Hiroshima",
        weather: {
          label: "å»£å³¶å¸‚å€",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=340010&lang=en",
          status: "å¤šé›²é–“æ­‡æ™´æœ—",
          temp: "ç´„ 10Â°C / 4Â°C",
          tip: "æ°£æº«æ˜é¡¯ä¸‹é™ï¼Œè«‹å‹™å¿…æº–å‚™ä¿æš–å¤–å¥—åŠç™¼ç†±è¡£ç‰©ã€‚"
        },
        activities: [
          {
            time: "07:00â€“10:15",
            label: "æ¡ƒåœ’ (TPE) â†’ å»£å³¶ (HIJ)ï¼ˆä¸­è¯èˆªç©º CI112ï¼‰",
            icon: "âœˆï¸",
            mapQuery: "Hiroshima Airport",
          },
          {
            time: "11:02â€“12:09",
            label: "å»£å³¶ç©ºæ¸¯ â†’ å»£å³¶å·´å£«ä¸­å¿ƒï¼ˆåˆ©æœ¨æ´¥å·´å£«ï¼‰",
            icon: "ğŸšŒ",
            mapQuery: "Hiroshima Bus Center",
          },
          {
            time: "12:00â€“13:00",
            label: "åˆé¤ï¼šå»£å³¶ç‰¡è £å¤§é¤",
            icon: "ğŸ¦ª",
            mapQuery: "Hiroshima Kakidokoro Baketsu Kamiyacho",
            foodName: "Hiroshima Kakidokoro Baketsu",
            foodStatus: "booked",
            foodNote: "é£¯åº—é™„è¿‘ï¼Œå·²å®Œæˆé ç´„ã€‚"
          },
          {
            time: "13:00â€“17:00",
            label: "åŸçˆ†ãƒ‰ãƒ¼ãƒ ãƒ»ç´™é¶´å¡”ãƒ»å…ƒå®‰æ©‹ãƒ»å’Œå¹³ç´€å¿µå…¬åœ’ä¸€å¸¶æ•£æ­¥",
            icon: "ğŸ•Šï¸",
            mapQuery: "Hiroshima Peace Memorial Museum",
          },
          {
            time: "18:00â€“22:00",
            label: "æ™šé¤ï¼šå’Œç‰›ç‡’è‚‰",
            icon: "ğŸ¥©",
            mapQuery: "Yakiniku Furusato Hiroshima Station",
            foodName: "Yakiniku Furusato Hiroshima station",
            foodStatus: "booked",
            foodNote: "å»£å³¶ç«™é™„è¿‘ï¼Œå’Œç‰›ç‡’è‚‰ï¼Œå·²é è¨‚ã€‚"
          }
        ]
      },
      {
        id: 3,
        dateLabel: "12/04 (å››)",
        title: "Day 3ï¼šå§¬è·¯åŸå·¡ç¦®ï¼ˆç„¡å®®å³¶ï¼‰",
        city: "å»£å³¶ â†’ å§¬è·¯",
        theme: "ä¸–ç•Œéºç”¢ç™½é·ºåŸï¼‹å§¬è·¯è€è¡—æ•£æ­¥",
        hotel: "å§¬è·¯å¤§å’Œ Roynet é£¯åº—ï¼ˆé è¨ˆï¼‰",
        jrPass: true,
        mapQuery: "Himeji Castle",
        hotelMapQuery: "Daiwa Roynet Hotel Himeji, 353 Ekimae-cho, Himeji",
        weather: {
          label: "å§¬è·¯å¸‚å€",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=630&lang=en",
          status: "å¤šé›²é–“æ­‡æ™´æœ—",
          temp: "ç´„ 11Â°C / 0Â°C",
          tip: "æ¸…æ™¨å’Œå¤œé–“æ¥è¿‘å†°é»ï¼Œé˜²é¢¨å¤–å¥—å’Œåœå·¾éå¸¸é‡è¦ã€‚"
        },
        activities: [
          {
            time: "09:56â€“10:44",
            label: "å»£å³¶ â†’ å§¬è·¯ï¼ˆå±±é™½æ–°å¹¹ç·š Mizuho 602ï¼Œ09:56-10:44ï¼‰ï¼ğŸ« JR Pass ä½¿ç”¨æ—¥",
            icon: "ğŸš„",
            mapQuery: "Himeji Station",
          },
          {
            time: "11:00 å‰å¾Œ",
            label: "å§¬è·¯å’–å•¡å»³æ—©åˆé¤ï¼ˆHamamoto Coffeeï¼Cafe de Muche æä»åå¸ï¼‰",
            icon: "â˜•",
            mapQuery: "Cafe de Muche Himeji",
            foodName: "Hamamoto Coffee æˆ– Cafe de Muche",
            foodStatus: "planned",
            foodNote: "ç¾å ´çœ‹æ’éšŠæƒ…æ³å†æ±ºå®šã€‚"
          },
          {
            time: "12:00â€“15:00",
            label: "å§¬è·¯åŸå¤©å®ˆé–£ï¼‹å¥½å¤åœ’åº­åœ’",
            icon: "ğŸ¯",
            mapQuery: "Himeji Castle",
          },
          {
            time: "å‚æ™š",
            label: "å¤§æ‰‹å‰é€šæ•£æ­¥ãƒ»FESTA ç­‰å•†å ´é€›è¡—",
            icon: "ğŸ›ï¸",
            mapQuery: "Otemae Street Himeji",
          },
          {
            time: "19:00 å‰å¾Œ",
            label: "æ™šé¤ï¼šå§¬è·¯æ˜çŸ³ç‡’ï¼ˆãŸã“ãƒ”ã‚£ / Tacopyï¼‰",
            icon: "ğŸ³",
            mapQuery: "Tacopy Himeji",
            foodName: "Tacopy æ˜çŸ³ç‡’",
            foodStatus: "planned",
            foodNote: "B ç´šç¾é£Ÿï¼Œå¯ç¾å ´å€™ä½ã€‚"
          }
        ]
      },
      {
        id: 4,
        dateLabel: "12/05 (äº”)",
        title: "Day 4ï¼šå€‰æ•·ç¾è§€åœ°å€",
        city: "å§¬è·¯ â†’ å²¡å±± â†’ å€‰æ•·",
        theme: "é‹æ²³è€è¡—ãƒ»é˜¿æ™ºç¥ç¤¾ãƒ»èŸ¹é“æ¨‚",
        hotel: "å²¡å±±é£¯åº—ï¼ˆå²¡å±±å¤§å’Œ Roynetï¼æ ¼è˜­æ¯”äº ç­‰ï¼‰",
        jrPass: true,
        mapQuery: "Kurashiki Bikan Historical Quarter",
        hotelMapQuery: "Daiwa Roynet Hotel Okayama-Ekimae, 1-1-1 Ekimaecho, Kita-ku, Okayama",
        weather: {
          label: "å²¡å±±ãƒ»å€‰æ•·",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=660&lang=en",
          status: "å¤šé›²",
          temp: "ç´„ 9Â°C / 1Â°C",
          tip: "ç™½å¤©æº«åº¦åä½ï¼Œå¤œé–“æ¥è¿‘å†°é»ï¼Œå¤šå±¤æ¬¡ç©¿æ­ä»¥æ‡‰å°å®¤å…§å¤–æº«å·®ã€‚"
        },
        activities: [
          {
            time: "10:50â€“11:09",
            label: "å§¬è·¯ â†’ å²¡å±±ï¼ˆå±±é™½æ–°å¹¹ç·š Sakura 551ï¼Œ10:50-11:09ï¼‰ï¼ğŸ« JR Pass ä½¿ç”¨æ—¥",
            icon: "ğŸš„",
            mapQuery: "Okayama Station",
          },
          {
            time: "10:00â€“11:00",
            label: "é£¯åº— Check-in æ”¾è¡Œæ",
            icon: "ğŸ¨",
            mapQuery: "Okayama Station Hotel area",
          },
          {
            time: "11:30â€“13:00",
            label: "æ—©åˆé¤ï¼šå€‰æ•·ç¾é£Ÿä¸‰é¸ä¸€ï¼ˆå€‰æ•·ãƒ—ãƒªãƒ³ï¼æœ‰é„°åºµï¼Den è•éº¥éºµï¼‰",
            icon: "ğŸœ",
            mapQuery: "Kurashiki Bikan area",
            foodName: "å€‰æ•·ãƒ—ãƒªãƒ³ï¼æœ‰é„°åºµï¼Den è•éº¥éºµ",
            foodStatus: "planned",
            foodNote: "ä¾ç¾å ´æ’éšŠèˆ‡ç•¶å¤©æƒ³åƒçš„é¡å‹æ±ºå®šã€‚"
          },
          {
            time: "13:00â€“17:00",
            label: "å€‰æ•·ç¾è§€åœ°å€æ•£æ­¥ï¼‹é˜¿æ™ºç¥ç¤¾åƒæ‹œï¼‹Ario å€‰æ•·é€›è¡—",
            icon: "ğŸ›¶",
            mapQuery: "Achi Shrine Kurashiki",
          },
          {
            time: "17:30",
            label: "æ™šé¤ï¼šèŸ¹é“æ¨‚ å²¡å±±åº—ï¼ˆæ¨‚åƒè³¼å„ªæƒ å¯æ‹¿å¯æ¨‚é¤…ï¼‰",
            icon: "ğŸ¦€",
            mapQuery: "Kani Doraku Okayama",
            foodName: "èŸ¹é“æ¨‚ å²¡å±±",
            foodStatus: "booked",
            foodNote: "å·²é ç´„ 17:30 å…¥åº§ã€‚"
          },
          {
            time: "æ™šé¤å¾Œ",
            label: "Little Okayama å’–å•¡å»³å–å’–å•¡ï¼‹çœ‹å‚™å‰ç‡’",
            icon: "â˜•",
            mapQuery: "Little Okayama Cafe",
          }
        ]
      },
      {
        id: 5,
        dateLabel: "12/06 (å…­)",
        title: "Day 5ï¼šå²¡å±±æ·±åº¦éŠï¼‹å›å»£å³¶",
        city: "å²¡å±± â†’ å»£å³¶",
        theme: "ç¥ç¤¾å¾¡å®ˆãƒ»å¾Œæ¨‚åœ’ãƒ»å»£å³¶å…¥ä½ Hilton",
        hotel: "å»£å³¶ Hiltonï¼ˆå·²è¨‚ï¼‰",
        jrPass: true,
        mapQuery: "Okayama Korakuen Garden",
        hotelMapQuery: "Hilton Hiroshima, 11-12 Fujimicho, Naka-ku, Hiroshima",
        weather: {
          label: "å²¡å±± â†’ å»£å³¶ (ä¸»è¦å»£å³¶å¤©æ°£)",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/cyugoku.html?forecast=weather0&lang=en",
          status: "å¤§å¤šæ™´æœ—",
          temp: "ç´„ 13Â°C / 3Â°C",
          tip: "æ™´æœ—å¥½å¤©æ°£ï¼Œé©åˆæˆ¶å¤–æ´»å‹•ã€‚ä½†æ—¥å¤œæº«å·®å¤§ï¼Œæ³¨æ„ä¿æš–ã€‚"
        },
        activities: [
          {
            time: "09:00â€“11:30",
            label: "å²¡å±±ç¥ç¤¾ãƒ»å‰å‚™æ´¥å½¥ç¥ç¤¾ï¼ˆæ¡ƒå­å¾¡å®ˆï¼‰",
            icon: "â›©ï¸",
            mapQuery: "Kibitsuhiko Shrine",
          },
          {
            time: "12:00â€“13:30",
            label: "åˆé¤ï¼šå²¡å±±æ‹‰éºµï¼ˆéºµé…’ä¸€ç…§åºµ æˆ– å°¾é“ã‚‰ãƒ¼ã‚ã‚“ç‡ˆï¼‰",
            icon: "ğŸœ",
            mapQuery: "éºµé…’ä¸€ç…§åºµ å²¡å±±",
            foodName: "éºµé…’ä¸€ç…§åºµï¼å°¾é“ã‚‰ãƒ¼ã‚ã‚“ç‡ˆ",
            foodStatus: "planned",
            foodNote: "çœ‹æ’éšŠé•·åº¦èˆ‡å¿ƒæƒ…é¸ä¸€é–“ã€‚"
          },
          {
            time: "14:00â€“16:00",
            label: "å²¡å±±å¾Œæ¨‚åœ’æ•£ç­–",
            icon: "ğŸŒ¿",
            mapQuery: "Okayama Korakuen",
          },
          {
            time: "16:26â€“17:05",
            label: "å²¡å±± â†’ å»£å³¶ï¼ˆå±±é™½æ–°å¹¹ç·š Nozomi 35ï¼Œ16:26-17:05ï¼‰ï¼ğŸ« JR Pass ä½¿ç”¨æ—¥",
            icon: "ğŸš„",
            mapQuery: "Hiroshima Station",
          },
          {
            time: "å‚æ™š",
            label: "å…¥ä½å»£å³¶ Hiltonãƒ»è¦–æƒ…æ³ä½¿ç”¨ Lounge Happy Hourï¼ˆ17:00â€“19:00ï¼‰",
            icon: "ğŸ¨",
            mapQuery: "Hilton Hiroshima",
          },
          {
            time: "20:00â€“22:00",
            label: "å¤œé–“è³¼ç‰©ï¼šè¥¿æ¾å±‹ãƒ»é‹å‹•ç”¨å“åº—ç­‰",
            icon: "ğŸ›’",
            mapQuery: "Hiroshima city shopping area",
          }
        ]
      },
      {
        id: 6,
        dateLabel: "12/07 (æ—¥)",
        title: "Day 6ï¼šå°¾é“å±±åŸèˆ‡è²“ä¹‹ç´°é“",
        city: "å»£å³¶ â†’ å°¾é“ â†’ å»£å³¶",
        theme: "åƒå…‰å¯ºãƒ»è²“ä¹‹ç´°é“ãƒ»å°¾é“æ‹‰éºµ",
        hotel: "å»£å³¶ Hiltonï¼ˆå·²è¨‚ï¼‰",
        jrPass: true,
        mapQuery: "Onomichi Senkoji Park",
        hotelMapQuery: "Hilton Hiroshima, 11-12 Fujimicho, Naka-ku, Hiroshima",
        weather: {
          label: "å°¾é“ï¼ˆå»£å³¶ç¸£æ±éƒ¨ï¼‰",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=340010&lang=en",
          status: "å¤šé›²é–“æ­‡æ™´æœ—",
          temp: "ç´„ 17Â°C / 5Â°C",
          tip: "æ°£æº«å›å‡ï¼Œä½†é¢¨å¤§æ™‚ä»æœƒæ„Ÿè¦ºå†·ï¼Œç™»å±±æ™‚å»ºè­°ç©¿è„«æ–¹ä¾¿çš„è¡£ç‰©ã€‚"
        },
        activities: [
          {
            time: "09:18â€“09:41",
            label: "å»£å³¶ â†’ ç¦å±±ï¼ˆå±±é™½æ–°å¹¹ç·š Nozomi 12ï¼Œ09:18-09:41ï¼‰ï¼Œå¾Œè½‰ JRå±±é™½æœ¬ç·šè‡³å°¾é“ï¼ğŸ« JR Pass ä½¿ç”¨æ—¥",
            icon: "ğŸš„",
            mapQuery: "Onomichi Station",
          },
          {
            time: "10:00â€“12:00",
            label: "åƒå…‰å¯ºçºœè»Šä¸Šå±±ãƒ»åƒå…‰å¯ºå…¬åœ’çœºæœ›ç€¨æˆ¶å…§æµ·",
            icon: "â›°ï¸",
            mapQuery: "Senkoji Park",
          },
          {
            time: "12:00â€“13:30",
            label: "åˆé¤ï¼šå°¾é“æ‹‰éºµæˆ–å°¾é“ç‡’",
            icon: "ğŸœ",
            mapQuery: "Onomichi Ramen",
            foodName: "å°¾é“æ‹‰éºµï¼å°¾é“ç‡’",
            foodStatus: "planned",
            foodNote: "çœ‹è©•åƒ¹èˆ‡æ’éšŠæƒ…æ³è‡¨å ´æ±ºå®šã€‚"
          },
          {
            time: "13:30â€“16:30",
            label: "è²“ä¹‹ç´°é“ãƒ»å°¾é“æœ¬é€šå•†åº—è¡—æ•£æ­¥",
            icon: "ğŸ¾",
            mapQuery: "Neko no Hosomichi Onomichi",
          },
          {
            time: "å‚æ™šï½æ™šä¸Š",
            label: "è¿”å›å»£å³¶ãƒ»æ™šé¤ï¼šè»Šç«™é™„è¿‘è¿´è½‰å£½å¸æˆ–å¸‚å€é¤å»³",
            icon: "ğŸ£",
            mapQuery: "Hiroshima Station ekie Sushi",
          }
        ]
      },
      {
        id: 7,
        dateLabel: "12/08 (ä¸€)",
        title: "Day 7ï¼šå¤§é˜ªä¸€æ—¥éŠï¼ˆè¡Œç¨‹æœªå®šï¼‰",
        city: "å»£å³¶ â†” æ–°å¤§é˜ª",
        theme: "å¤§é˜ªå½ˆæ€§è¡Œç¨‹ï¼Œåƒ…ä¿ç•™äº¤é€š",
        hotel: "å»£å³¶ Hiltonï¼ˆå·²è¨‚ï¼‰",
        jrPass: true,
        mapQuery: "Shin-Osaka Station",
        hotelMapQuery: "Hilton Hiroshima, 11-12 Fujimicho, Naka-ku, Hiroshima",
        weather: {
          label: "å¤§é˜ªå¸‚å€ (é è¨ˆ)",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=270000&lang=en",
          status: "å¤šé›²çŸ­æš«é™£é›¨ (60% é™é›¨ç‡)",
          temp: "ç´„ 16Â°C / 9Â°C",
          tip: "å¤§é˜ªæœ‰ 60% æ©Ÿç‡é™é›¨ï¼Œè«‹å‹™å¿…æ”œå¸¶é›¨å…·ä¸¦è€ƒæ…®å®¤å…§å‚™æ¡ˆã€‚æ­¤ç‚º JR Pass æœ€å¾Œä¸€æ—¥ã€‚"
        },
        activities: [
          {
            time: "09:07â€“10:28",
            label: "å»£å³¶ â†’ æ–°å¤§é˜ªï¼ˆå±±é™½æ–°å¹¹ç·š Nozomi 10ï¼Œ09:07-10:28ï¼‰ï¼ğŸ« JR Pass ä½¿ç”¨æ—¥",
            icon: "ğŸš„",
            mapQuery: "Shin-Osaka Station",
          },
          {
            time: "10:30â€“18:00",
            label: "æ–°å¤§é˜ªç«™å‘¨é‚Š/å¤§é˜ªå¸‚å€å½ˆæ€§æ´»å‹•",
            icon: "â“",
            mapQuery: "Osaka Station City or Namba area",
            foodName: "åˆé¤/æ™šé¤/æ´»å‹•æœªå®š",
            foodStatus: "planned",
            foodNote: "å¯é¸æ“‡å‰å¾€å¤§é˜ªåŸã€å¿ƒé½‹æ©‹ã€æ¢…ç”°ç­‰åœ°ï¼Œå¾…æ±ºå®šå¾Œå†å¡«å…¥ç´°ç¯€ã€‚"
          },
          {
            time: "18:20â€“19:41",
            label: "æ–°å¤§é˜ª â†’ å»£å³¶ï¼ˆå±±é™½æ–°å¹¹ç·š Nozomi 47ï¼Œ18:20-19:41ï¼‰ï¼ğŸ« JR Pass æœ€å¾Œä¸€æ—¥",
            icon: "ğŸš„",
            mapQuery: "Shin-Osaka Station to Hiroshima Station",
          }
        ]
      },
      {
        id: 8,
        dateLabel: "12/09 (äºŒ)",
        title: "Day 8ï¼šå»£å³¶å¸‚å€æ·±åº¦ï¼†æ¡è³¼",
        city: "å»£å³¶",
        theme: "åŸè·¡åº­åœ’ï¼‹æœ€å¾Œçš„å¤§æ¡è³¼æ—¥",
        hotel: "å»£å³¶éº—å˜‰çš‡å®¶é£¯åº—ï¼ˆå·²è¨‚ï¼‰",
        jrPass: false,
        mapQuery: "Hiroshima Castle, Shukkeien, Mega Sports Hiroshima Fuchu",
        hotelMapQuery: "Rihga Royal Hotel Hiroshima, 6-78 Motomachi, Naka-ku, Hiroshima",
        weather: {
          label: "å»£å³¶å¸‚å€",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=340010&lang=en",
          status: "å¤šé›²é–“æ­‡æ™´æœ—",
          temp: "ç´„ 14Â°C / 5Â°C",
          tip: "è‹¥æœ‰ä¸‹é›¨å¯èª¿æ•´ç‚ºå®¤å…§è³¼ç‰©ç‚ºä¸»ï¼Œç›®å‰çœ‹ä¾†å¤©æ°£å°šå¯ã€‚"
        },
        activities: [
          {
            time: "ä¸Šåˆ",
            label: "ç¸®æ™¯åœ’ãƒ»å»£å³¶åŸãƒ»å»£å³¶è­·åœ‹ç¥ç¤¾",
            icon: "ğŸ¯",
            mapQuery: "Hiroshima Castle",
          },
          {
            time: "ä¸­åˆ",
            label: "åˆé¤ï¼šå¸‚å€é¤å»³æˆ–ç™¾è²¨ç¾é£Ÿè¡—ï¼ˆå½ˆæ€§å®‰æ’ï¼‰",
            icon: "ğŸ±",
            mapQuery: "Hiroshima city restaurant",
          },
          {
            time: "ä¸‹åˆ",
            label: "å‰å¾€ AEON MALL Hiroshima Fuchuãƒ»Mega Sports Hiroshima Fuchu æ¡è³¼é‹å‹•ç”¨å“",
            icon: "ğŸ›’",
            mapQuery: "Mega Sports Hiroshima Fuchu",
          },
          {
            time: "å‚æ™š",
            label: "è¦–æˆ°åˆ©å“å¤šå¯¡æ±ºå®šæ˜¯å¦å†é€›å¸‚å€æˆ–å›é£¯åº—æ•´ç†è¡Œæ",
            icon: "ğŸ’",
            mapQuery: "AEON MALL Hiroshima Fuchu",
          },
          {
            time: "æ™šé¤",
            label: "æœ€å¾Œä¸€æ™šå»£å³¶æ™šé¤ï¼ˆå»£å³¶ç‡’ï¼å±…é…’å±‹ï¼å£½å¸åº—ï¼‰",
            icon: "ğŸ£",
            mapQuery: "Hiroshima okonomiyaki restaurant",
          }
        ]
      },
      {
        id: 9,
        dateLabel: "12/10 (ä¸‰)",
        title: "Day 9ï¼šè³¦æ­¸",
        city: "å»£å³¶ â†’ æ¡ƒåœ’ â†’ å°å—",
        theme: "æ…¢æ…¢æ”¶å°¾ãƒ»å¸¶è‘—æ»¿æ»¿æˆ°åˆ©å“å›å®¶",
        hotel: "N/Aï¼ˆè¿”å®¶ï¼‰",
        jrPass: false,
        mapQuery: "Hiroshima Airport, Tainan HSR Station",
        hotelMapQuery: null,
        weather: {
          label: "å»£å³¶å¸‚å€",
          jmaUrl: "https://www.data.jma.go.jp/multi/yoho/yoho_detail.html?code=340010&lang=en",
          status: "å¤šé›²é–“æ­‡æ™´æœ—",
          temp: "ç´„ 13Â°C / 7Â°C",
          tip: "ç•™æ„å»£å³¶æ©Ÿå ´çš„æ°£æº«è¼ƒå¸‚å€ä½ï¼Œæ­æ©Ÿæ™‚æ³¨æ„ä¿æš–ã€‚"
        },
        activities: [
          {
            time: "æ—©ä¸Š",
            label: "é£¯åº—é€€æˆ¿ãƒ»ç¢ºèªè¡Œæé‡é‡èˆ‡ä¼´æ‰‹ç¦®",
            icon: "ğŸ§³",
            mapQuery: "Hilton Hiroshima",
          },
          {
            time: "08:15 å‰å¾Œ",
            label: "å»£å³¶å¸‚å€ â†’ å»£å³¶ç©ºæ¸¯ï¼ˆåˆ©æœ¨æ´¥å·´å£«ï¼‰",
            icon: "ğŸšŒ",
            mapQuery: "Hiroshima Airport Limousine Bus",
          },
          {
            time: "11:15â€“13:15",
            label: "å»£å³¶ (HIJ) â†’ æ¡ƒåœ’ (TPE)ï¼ˆä¸­è¯èˆªç©º CI113ï¼‰",
            icon: "âœˆï¸",
            mapQuery: "Hiroshima Airport",
          },
          {
            time: "15:43â€“17:12",
            label: "æ¡ƒåœ’é«˜éµ â†’ å°å—é«˜éµï¼ˆå°ç£é«˜éµ 15:43-17:12ï¼Œé è¨ˆè»Šæ¬¡ 655ï¼‰",
            icon: "ğŸš„",
            mapQuery: "Taiwan High Speed Rail Taoyuan",
          }
        ]
      }
    ];

    /**
     * æ§‹å»º Google Maps æœç´¢ URLã€‚
     * @param {string} query æœç´¢çš„é—œéµè©æˆ–åœ°å€ã€‚
     * @returns {string} å¯ç”¨çš„ Google Maps URLã€‚
     */
    function buildGoogleSearchUrl(query) {
      // ä¿®æ­£å¾Œçš„ Google Maps æ¨™æº–æœç´¢ API URL
      return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
    }

    function renderItinerary() {
      const container = document.getElementById("itinerary-container");
      container.innerHTML = itinerary.map((day, idx) => {
        const isFirst = idx === 0;
        const activitiesHtml = day.activities.map(act => {
          const hasMap = !!act.mapQuery;
          const hasFood = !!act.foodName && !!act.foodStatus;
          let foodHtml = "";
          if (hasFood) {
            const isBooked = act.foodStatus === "booked";
            const cls = isBooked ? "food-booked" : "food-planned";
            const icon = isBooked ? "âœ…" : "ğŸ“";
            foodHtml = `<div class="${cls}">${icon} <span class="font-semibold">${act.foodName}</span><span class="ml-1 text-[0.78rem]">${act.foodNote ? "â€” " + act.foodNote : ""}</span></div>`;
          }
          return `
            <li class="flex items-start space-x-3">
              <div class="text-xl pt-1">${act.icon || "â€¢"}</div>
              <div class="flex-1">
                <p class="text-slate-900 font-semibold text-[0.98rem]">${act.label}</p>
                <p class="text-xs text-slate-500 mt-0.5">${act.time}</p>
                ${hasMap ? `<a href="${buildGoogleSearchUrl(act.mapQuery)}" target="_blank" class="inline-flex items-center mt-1 text-xs text-emerald-700 hover:text-emerald-900 underline underline-offset-2">
                    åœ¨ Google Maps é–‹å•Ÿ
                    <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 3h7m0 0v7m0-7L10 14"></path>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5v14h14"></path>
                    </svg>
                  </a>` : ""}
                ${foodHtml}
              </div>
            </li>
          `;
        }).join("");

        const jrBadge = day.jrPass
          ? `<span class="inline-flex items-center text-[0.68rem] font-semibold text-emerald-800 bg-emerald-100 border border-emerald-300 rounded-full px-2 py-0.5 ml-2">
              ğŸ« JR WEST å±±é™½æ–°å¹¹ç·š Pass ä½¿ç”¨æ—¥
            </span>`
          : "";

        const weatherHtml = day.weather && (day.weather.status || day.weather.tip)
          ? `<div class="mt-4 p-3 bg-sky-50 border border-sky-200 rounded-xl shadow-inner">
              <div class="flex items-center justify-between text-sm text-sky-900 mb-2">
                <div class="font-bold tracking-wide flex items-center">
                  <span class="mr-2 text-xl">
                    ${day.weather.status.includes("é›¨") ? "ğŸŒ§ï¸" : day.weather.status.includes("æ™´") ? "â˜€ï¸" : "â˜ï¸"}
                  </span>
                  ä»Šæ—¥å¤©æ°£ (${day.weather.label})ï¼š<span class="ml-1 text-base">${day.weather.status}</span>
                </div>
                <div class="text-base font-bold text-slate-700">
                   ${day.weather.temp}
                </div>
              </div>
              <div class="text-[0.7rem] text-sky-700 mt-1">${day.weather.tip}</div>
              ${day.weather.jmaUrl ? `<a href="${day.weather.jmaUrl}" target="_blank"
                   class="inline-flex items-center mt-2 text-[0.7rem] font-semibold text-white bg-sky-600 hover:bg-sky-700 px-3 py-1 rounded-full shadow-sm">
                   æŸ¥çœ‹ JMA è©³ç´°é å ±
                   <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 3h7m0 0v7m0-7L10 14"></path>
                     <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5v14h14"></path>
                   </svg>
                 </a>` : ""}
            </div>`
          : "";
          
        const hotelMapLinkHtml = day.hotelMapQuery
            ? `<a href="${buildGoogleSearchUrl(day.hotelMapQuery)}" target="_blank" class="inline-flex items-center text-[0.7rem] font-medium text-blue-600 hover:text-blue-800 bg-blue-50 border border-blue-200 rounded-full px-2 py-0.5 whitespace-nowrap">
                ğŸ  å°èˆªå›é£¯åº—
               </a>`
            : '';

        return `
          <section class="day-card bg-white rounded-2xl border border-slate-200 overflow-hidden">
            <input id="day-${day.id}" type="checkbox" class="accordion-toggle hidden" ${isFirst ? "checked" : ""} />
            <label for="day-${day.id}" class="flex justify-between items-center px-5 py-4 cursor-pointer bg-gradient-to-r from-slate-900 via-slate-800 to-emerald-700 text-white">
              <div>
                <div class="text-xs font-light opacity-80">${day.dateLabel}ï½œ${day.city}</div>
                <div class="text-lg md:text-xl font-bold flex items-center">
                  ${day.title}
                  ${jrBadge}
                </div>
                <div class="text-[0.75rem] md:text-xs text-emerald-200 mt-0.5">
                  ğŸ¯ ä»Šæ—¥ä¸»é¡Œï¼š${day.theme}
                </div>
              </div>
              <svg class="w-6 h-6 transition-transform duration-300 ${isFirst ? "rotate-icon" : ""}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </label>
            <div class="accordion-content">
              <div class="px-5 pt-4 pb-5 space-y-4">
                
                <div class="space-y-3">
                  <div class="text-xs text-slate-600">
                    <div class="font-semibold text-slate-800 flex items-center gap-2 flex-wrap">
                      ä½å®¿ï¼š<span class="font-normal">${day.hotel}</span>
                      ${hotelMapLinkHtml}
                    </div>
                  </div>
                  <a href="${buildGoogleSearchUrl(day.mapQuery)}" target="_blank"
                     class="block rounded-xl overflow-hidden bg-gradient-to-r from-sky-500 via-emerald-500 to-emerald-600 shadow-inner ring-1 ring-emerald-300/40 hover:shadow-lg hover:brightness-105 transition relative">
                    <div class="px-4 py-3 flex items-center justify-between">
                      <div class="text-xs text-sky-50">
                        <div class="font-semibold tracking-wide flex items-center gap-1">
                          <span>ğŸ—ºï¸ ç•¶æ—¥ç¸½è¦½åœ°åœ–</span>
                          <span class="text-[0.65rem] px-2 py-[2px] rounded-full bg-emerald-900/40 border border-emerald-300/40">å¯é»æ“Šé–‹å•Ÿ</span>
                        </div>
                        <div class="text-[0.68rem] mt-1 opacity-90 line-clamp-2">
                          ä¾æ“šä»Šæ—¥å®‰æ’çš„å¤§è‡´æ´»å‹•ç¯„åœé¡¯ç¤ºï¼ˆå¯¦éš›è·¯ç·šè«‹ä»¥ Google Maps å³æ™‚å°èˆªç‚ºæº–ï¼‰ã€‚
                        </div>
                      </div>
                      <div class="flex flex-col items-center text-sky-50 text-[0.7rem] ml-3">
                        <span class="text-2xl mb-1">ğŸ“</span>
                        <span class="px-2 py-[2px] rounded-full bg-sky-900/40 border border-sky-200/40">Open in Maps</span>
                      </div>
                    </div>
                  </a>
                </div>


                ${weatherHtml}

                <ul class="mt-2 space-y-3">
                  ${activitiesHtml}
                </ul>
              </div>
            </div>
          </section>
        `;
      }).join("");

      // è™•ç†ç®­é ­æ—‹è½‰
      document.querySelectorAll(".accordion-toggle").forEach(cb => {
        cb.addEventListener("change", () => {
          const icon = cb.nextElementSibling.querySelector("svg");
          if (icon) {
            icon.classList.toggle("rotate-icon", cb.checked);
          }
        });
      });
    }

    document.addEventListener("DOMContentLoaded", renderItinerary);
  </script>
<!-- PWA service worker registration -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function () {
      navigator.serviceWorker
        .register('./service-worker.js')
        .catch(function (err) {
          console.warn('Service worker registration failed:', err);
        });
    });
  }
</script>

</body>
</html>
